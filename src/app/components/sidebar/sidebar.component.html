<aside
  class="h-screen fixed top-0 left-0 z-40 flex flex-col justify-between bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-slate-200 border-r border-slate-200 dark:border-slate-800 transition-all duration-300 ease-in-out"
  [ngClass]="layoutService.isSidebarCollapsed() ? 'w-20' : 'w-64'"
>
  <!-- Top Section (No changes needed here, but remove pi icons) -->
  <div>
    <div
      class="h-16 flex items-center border-b border-slate-200 dark:border-slate-800"
      [ngClass]="layoutService.isSidebarCollapsed() ? 'justify-center' : 'px-6'"
    >
      <!-- Simple SVG logo placeholder -->
      <svg
        class="w-8 h-8 text-blue-500"
        viewBox="0 0 24 24"
        fill="currentColor"
      >
        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5-10-5-10 5z"></path>
      </svg>
      <span
        class="text-xl font-bold ml-3"
        [ngClass]="{ hidden: layoutService.isSidebarCollapsed() }"
        >MyDash</span
      >
    </div>
    <!-- Find this <nav> element in your file and replace its contents -->
    <nav class="mt-4">
      <ul>
        <!-- Loop over the menuItems array from the component -->
        <li *ngFor="let item of menuItems">
          <a
            [routerLink]="item.path"
            routerLinkActive="bg-blue-500/10 text-blue-500 dark:text-blue-400 font-semibold"
            class="flex items-center p-3 mx-3 my-1 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors"
          >
            <!-- Icon container -->
            <div class="w-6 h-6">
              <!-- Switch statement to render the correct SVG icon -->
              <ng-container [ngSwitch]="item.iconName">
                <!-- Dashboard Icon -->
                <svg
                  *ngSwitchCase="'home'"
                  xmlns="http://www.w.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"
                  />
                </svg>

                <!-- Analytics Icon -->
                <svg
                  *ngSwitchCase="'chart'"
                  xmlns="http://www.w.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 1.5m1-1.5l1 1.5m0 0l.5 1.5m.5-1.5h.5m2.25-3l-1-1.5m1 1.5l1-1.5m0 0l.5-1.5m.5 1.5h.5M6 16.5h2.25m0 0h7.5M6 16.5l.5 1.5m.5-1.5h.5"
                  />
                </svg>

                <!-- Users Icon -->
                <svg
                  *ngSwitchCase="'users'"
                  xmlns="http://www.w.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.663c.11-.22.217-.440.315-.666v.003zM9 12a3 3 0 11-6 0 3 3 0 016 0zm9-3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"
                  />
                </svg>
              </ng-container>
            </div>

            <!-- Label (hides when sidebar is collapsed) -->
            <span
              class="ml-4"
              [ngClass]="{ hidden: layoutService.isSidebarCollapsed() }"
            >
              {{ item.label }}
            </span>
          </a>
        </li>
      </ul>
    </nav>
  </div>

  <!-- Bottom Section: Theme Toggle & Profile -->
  <div class="p-3 border-t border-slate-200 dark:border-slate-800">
    <!-- Theme Toggle Button -->
    <button
      (click)="themeService.toggleTheme()"
      class="w-full flex items-center justify-center p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors"
    >
      <ng-container *ngIf="themeService.theme() === 'light'">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="w-6 h-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M21.752 15.002A9.72 9.72 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 008.25-4.502z"
          />
        </svg>
      </ng-container>
      <ng-container *ngIf="themeService.theme() === 'dark'">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="w-6 h-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"
          />
        </svg>
      </ng-container>
      <span
        class="ml-4 font-medium"
        [ngClass]="{ hidden: layoutService.isSidebarCollapsed() }"
      >
        {{ themeService.theme() === "light" ? "Dark Mode" : "Light Mode" }}
      </span>
    </button>

    <!-- Profile Menu (Pure HTML/Tailwind) -->
    <div class="mt-2 relative">
      @if (authService.logedUser(); as user) {
      <button
        (click)="isProfileMenuOpen.set(!isProfileMenuOpen())"
        data-cy="profile-menu-button"
        class="w-full flex items-center p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors"
      >
        <img [src]="user.image" alt="User" class="w-10 h-10 rounded-full" />
        <div
          class="ml-3 text-left"
          [ngClass]="{ hidden: layoutService.isSidebarCollapsed() }"
        >
          <p class="font-semibold text-sm">{{ user.firstName }}</p>
          <p class="text-xs text-slate-500 dark:text-slate-400">
            {{ user.lastName }}
          </p>
        </div>
      </button>
      }

      <!-- Dropdown Menu -->
      <div
        *ngIf="isProfileMenuOpen()"
        class="absolute bottom-14 left-0 w-full bg-white dark:bg-slate-800 border dark:border-slate-700 rounded-lg shadow-lg p-2"
      >
        <a
          href="#"
          class="block px-4 py-2 text-sm rounded-md hover:bg-slate-100 dark:hover:bg-slate-700"
          >Profile</a
        >
        <a
          href="#"
          class="block px-4 py-2 text-sm rounded-md hover:bg-slate-100 dark:hover:bg-slate-700"
          >Settings</a
        >
        <hr class="my-1 border-slate-200 dark:border-slate-700" />
        <button
          data-cy="logout-button"
          (click)="logout()"
          class="block w-full text-left px-4 py-2 text-sm rounded-md hover:bg-slate-100 dark:hover:bg-slate-700"
        >
          Logout
        </button>
      </div>
    </div>
  </div>
</aside>
